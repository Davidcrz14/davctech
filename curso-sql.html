<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="DavC">
    <meta name="description" content="Curso de SQL">
    <link rel="icon" href="servidor-sql.png" type="image/x-icon">
    <title>Curso SQL - TechCursos</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Space+Grotesk:wght@500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos base */
        body {
            font-family: 'Space Grotesk', sans-serif;
        }

        .code-font {
            font-family: 'Fira Code', monospace;
        }

        /* Animación para los desplegables */
        .lesson-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }

        .lesson-content.active {
            max-height: 5000px; /* Aumentar este valor para permitir contenido más largo */
        }

        /* Estilos para bloques de código */
        .code-block {
            background: rgba(17, 24, 39, 0.8);
            border-radius: 0.5rem;
            border: 1px solid rgba(16, 185, 129, 0.2);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .code-block:hover {
            border-color: rgba(16, 185, 129, 0.5);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
        }

        .code-header {
            background: rgba(16, 185, 129, 0.1);
            border-bottom: 1px solid rgba(16, 185, 129, 0.2);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Animación para los elementos al aparecer */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Copiar los demás estilos del index.html aquí */
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <div class="matrix-bg"></div>

    <nav class="backdrop-blur-md bg-gray-900/50 border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500 code-font typewriter">&lt;DavCode/&gt;</a>
                </div>
                <style>
                    @keyframes typing {
                        from { width: 0 }
                        to { width: 100% }
                    }

                    .typewriter {
                        overflow: hidden;
                        border-right: .15em solid #10B981;
                        white-space: nowrap;
                        margin: 0 auto;
                        letter-spacing: .15em;
                        animation:
                            typing 2.0s steps(40, end),
                            blink-caret .75s step-end infinite;
                    }

                    @keyframes blink-caret {
                        from, to { border-color: transparent }
                        50% { border-color: #10B981; }
                    }
                </style>
                <div class="flex items-center space-x-8">
                    <a href="index.html" class="text-gray-300 hover:text-green-400 transition-colors code-font">&lt; Volver</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-12">
        <h1 class="text-4xl font-bold mb-6 code-font">
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500">
                Curso de SQL
            </span>
        </h1>

        <!-- Lección 1 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 1: Introducción a las bases de datos y SQL</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">¿Qué es una base de datos?</h3>
                    <p class="text-gray-300 mb-4">Una base de datos es un conjunto organizado de información estructurada, almacenada y accesible electrónicamente. Existen dos tipos principales de bases de datos:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>Bases de datos relacionales: Organizan datos en tablas con relaciones entre ellas.</li>
                        <li>Bases de datos no relacionales (NoSQL): Almacenan datos en formatos flexibles como documentos, grafos o pares clave-valor.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Introducción a SQL</h3>
                    <p class="text-gray-300 mb-4">SQL (Structured Query Language) es un lenguaje estándar para gestionar y manipular bases de datos relacionales. Permite realizar operaciones como crear, leer, actualizar y eliminar datos (CRUD).</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Historia y evolución de SQL</h3>
                    <p class="text-gray-300 mb-4">SQL fue desarrollado por IBM en la década de 1970 y se ha convertido en el estándar para bases de datos relacionales. Ha evolucionado con varias versiones y extensiones a lo largo de los años.</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Sistemas de gestión de bases de datos relacionales (RDBMS)</h3>
                    <p class="text-gray-300 mb-4">Los RDBMS más populares incluyen:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>MySQL: Open-source, muy popular para aplicaciones web.</li>
                        <li>PostgreSQL: Open-source, conocido por su robustez y características avanzadas.</li>
                        <li>Oracle: Solución empresarial de alto rendimiento.</li>
                        <li>SQL Server: Desarrollado por Microsoft, integrado con otras herramientas de la compañía.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Instalación y configuración de un entorno de trabajo con SQL</h3>
                    <p class="text-gray-300 mb-4">Para comenzar, puedes instalar MySQL Community Server y MySQL Workbench, que proporciona una interfaz gráfica para gestionar bases de datos. Visita mysql.com para descargar e instalar estas herramientas.</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Comandos básicos: CREATE DATABASE y USE DATABASE</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">comandos_basicos.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear una nueva base de datos</span>
<span class="text-blue-400">CREATE DATABASE</span> mi_primera_db;

<span class="text-green-400">-- Seleccionar la base de datos para su uso</span>
<span class="text-blue-400">USE</span> mi_primera_db;

<span class="text-green-400">-- Ahora puedes comenzar a crear tablas y trabajar en esta base de datos</span></pre>
                    </div>
                    <p class="text-gray-300 mt-4">Estos comandos te permiten crear una nueva base de datos y seleccionarla para su uso. Una vez seleccionada, puedes comenzar a crear tablas y realizar otras operaciones dentro de esa base de datos específica.</p>
                </div>
            </div>
        </div>

        <!-- Lección 2 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 2: Creación de tablas y tipos de datos</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Estructura de una tabla en SQL</h3>
                    <p class="text-gray-300 mb-4">Imagina una tabla en SQL como una hoja de cálculo. Cada columna representa un tipo de información (como nombre, edad, correo electrónico), y cada fila es un conjunto completo de datos de una persona o cosa. Por ejemplo, en una tabla de "estudiantes", cada fila sería un estudiante individual con sus datos en las columnas correspondientes.</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Tipos de datos en SQL</h3>
                    <p class="text-gray-300 mb-4">Los tipos de datos son como etiquetas que le dicen a la base de datos qué clase de información guardará cada columna. Aquí hay algunos ejemplos:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>ENTEROS (INT, BIGINT, SMALLINT, TINYINT): Para números sin decimales, como edades o cantidades.</li>
                        <li>TEXTO (VARCHAR, CHAR, TEXT): Para almacenar palabras o frases, como nombres o direcciones.</li>
                        <li>FECHAS (DATE, TIME, DATETIME, TIMESTAMP): Para guardar fechas y horas.</li>
                        <li>BOOLEANOS (BOOLEAN o TINYINT(1)): Para valores de verdadero o falso, como "¿Es estudiante activo?"</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Creación de tablas</h3>
                    <p class="text-gray-300 mb-4">Crear una tabla es como preparar un formulario en blanco. Definimos qué información queremos recopilar y cómo la guardaremos. Veamos un ejemplo:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">crear_tabla.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear una tabla de usuarios</span>
<span class="text-blue-400">CREATE TABLE</span> usuarios (
    id INT <span class="text-blue-400">PRIMARY KEY</span> AUTO_INCREMENT,
    nombre VARCHAR(50) <span class="text-blue-400">NOT NULL</span>,
    email VARCHAR(100) <span class="text-blue-400">UNIQUE</span>,
    fecha_registro DATE <span class="text-blue-400">DEFAULT</span> CURRENT_DATE,
    edad INT <span class="text-blue-400">CHECK</span> (edad >= 18),
    activo BOOLEAN <span class="text-blue-400">DEFAULT</span> TRUE
);</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li><code>CREATE TABLE usuarios</code>: Estamos creando una nueva tabla llamada "usuarios".</li>
                        <li><code>id INT PRIMARY KEY AUTO_INCREMENT</code>: Cada usuario tendrá un número único (id) que se incrementará automáticamente.</li>
                        <li><code>nombre VARCHAR(50) NOT NULL</code>: El nombre será texto de hasta 50 caracteres y no puede estar vacío.</li>
                        <li><code>email VARCHAR(100) UNIQUE</code>: El email será texto de hasta 100 caracteres y debe ser único en la tabla.</li>
                        <li><code>fecha_registro DATE DEFAULT CURRENT_DATE</code>: Guardará la fecha de registro, por defecto la fecha actual.</li>
                        <li><code>edad INT CHECK (edad >= 18)</code>: La edad debe ser un número entero de 18 o más.</li>
                        <li><code>activo BOOLEAN DEFAULT TRUE</code>: Indica si el usuario está activo, por defecto será verdadero.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Claves primarias y foráneas</h3>
                    <p class="text-gray-300 mb-4">Imagina que cada persona tiene un número de identificación único. Eso sería una clave primaria en SQL. Una clave foránea es como una referencia a ese número en otra tabla. Por ejemplo:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">claves.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear una tabla con clave foránea</span>
<span class="text-blue-400">CREATE TABLE</span> pedidos (
    id INT <span class="text-blue-400">PRIMARY KEY</span> AUTO_INCREMENT,
    usuario_id INT,
    producto VARCHAR(100),
    <span class="text-blue-400">FOREIGN KEY</span> (usuario_id) <span class="text-blue-400">REFERENCES</span> usuarios(id)
);</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Aquí, <code>usuario_id</code> en la tabla "pedidos" se refiere al <code>id</code> en la tabla "usuarios". Esto nos permite saber qué usuario hizo cada pedido.</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Restricciones</h3>
                    <p class="text-gray-300 mb-4">Las restricciones son reglas que aplicamos a nuestros datos para mantenerlos correctos y consistentes:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>NOT NULL: Es como decir "este campo debe llenarse obligatoriamente".</li>
                        <li>UNIQUE: Significa "no puede haber dos iguales", como con direcciones de email.</li>
                        <li>CHECK: Nos permite poner una condición, como "la edad debe ser mayor de 18".</li>
                        <li>DEFAULT: Establece un valor predeterminado si no se proporciona uno.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Comandos adicionales</h3>
                    <p class="text-gray-300 mb-4">Estos son algunos comandos útiles para trabajar con tablas:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">comandos_tabla.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Ver todas las tablas en la base de datos actual</span>
<span class="text-blue-400">SHOW TABLES</span>;

<span class="text-green-400">-- Modificar una tabla existente (agregar una nueva columna)</span>
<span class="text-blue-400">ALTER TABLE</span> usuarios <span class="text-blue-400">ADD COLUMN</span> telefono VARCHAR(15);

<span class="text-green-400">-- Eliminar una columna de una tabla</span>
<span class="text-blue-400">ALTER TABLE</span> usuarios <span class="text-blue-400">DROP COLUMN</span> telefono;

<span class="text-green-400">-- Eliminar una tabla (cuidado o te eliminas toda la tabla)</span>
<span class="text-blue-400">DROP TABLE</span> usuarios;

<span class="text-green-400">-- Ver la estructura de una tabla</span>
<span class="text-blue-400">DESCRIBE</span> usuarios;

<span class="text-green-400">-- Limpiar todos los datos de una tabla sin eliminar la tabla</span>
<span class="text-blue-400">TRUNCATE TABLE</span> usuarios;

<span class="text-green-400">-- Renombrar una tabla</span>
<span class="text-blue-400">RENAME TABLE</span> usuarios <span class="text-blue-400">TO</span> clientes;

<span class="text-green-400">-- Crear un índice en una columna para mejorar el rendimiento de las consultas</span>
<span class="text-blue-400">CREATE INDEX</span> idx_email <span class="text-blue-400">ON</span> usuarios(email);

<span class="text-green-400">-- Eliminar un índice</span>
<span class="text-blue-400">DROP INDEX</span> idx_email <span class="text-blue-400">ON</span> usuarios;</pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lección 3 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 3: Operaciones básicas de consulta (SELECT)</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Sintaxis básica de SELECT</h3>
                    <p class="text-gray-300 mb-4">La sentencia SELECT es la forma principal de consultar datos en SQL. Su estructura básica es:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">select_basico.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Seleccionar todas las columnas</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Seleccionar columnas específicas</span>
<span class="text-blue-400">SELECT</span> nombre, email <span class="text-blue-400">FROM</span> usuarios;</pre>
                    </div>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Alias para columnas y tablas</h3>
                    <p class="text-gray-300 mb-4">Los alias nos permiten renombrar temporalmente columnas o tablas para hacer las consultas más legibles:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">alias.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Alias para columnas</span>
<span class="text-blue-400">SELECT</span>
    nombre <span class="text-blue-400">AS</span> 'Nombre Completo',
    email <span class="text-blue-400">AS</span> 'Correo Electrónico'
<span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Alias para tablas</span>
<span class="text-blue-400">SELECT</span> u.nombre, u.email
<span class="text-blue-400">FROM</span> usuarios <span class="text-blue-400">AS</span> u;</pre>
                    </div>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Filtros con WHERE</h3>
                    <p class="text-gray-300 mb-4">La cláusula WHERE nos permite filtrar los resultados según condiciones específicas:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">filtros_where.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Filtrar por condición exacta</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">WHERE</span> edad = 25;

<span class="text-green-400">-- Filtrar por múltiples condiciones</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">WHERE</span> edad > 18 <span class="text-blue-400">AND</span> activo = TRUE;

<span class="text-green-400">-- Buscar patrones con LIKE</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">WHERE</span> email <span class="text-blue-400">LIKE</span> '%gmail.com';</pre>
                    </div>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Ordenación y límites</h3>
                    <p class="text-gray-300 mb-4">Podemos ordenar los resultados y limitar la cantidad de registros devueltos:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">orden_limite.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Ordenar resultados</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">ORDER BY</span> edad DESC;

<span class="text-green-400">-- Limitar número de resultados</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">LIMIT</span> 10;

<span class="text-green-400">-- Usar OFFSET para paginación</span>
<span class="text-blue-400">SELECT</span> * <span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">ORDER BY</span> id
<span class="text-blue-400">LIMIT</span> 10 <span class="text-blue-400">OFFSET</span> 20;</pre>
                    </div>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">DELETE FROM vs TRUNCATE TABLE</h3>
                    <p class="text-gray-300 mb-4">Es importante entender la diferencia entre estas dos operaciones de eliminación:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li><strong>DELETE FROM:</strong>
                            <ul class="list-disc list-inside ml-4">
                                <li>Es una operación DML (Lenguaje de Manipulación de Datos).</li>
                                <li>Borra los registros de una tabla fila por fila, y cada eliminación genera un registro en el log de transacciones, lo que permite que estas operaciones se deshagan si es necesario (por ejemplo, usando un ROLLBACK en una transacción).</li>
                                <li>Puede utilizar una cláusula WHERE para eliminar solo filas específicas.</li>
                            </ul>
                        </li>
                        <li><strong>TRUNCATE TABLE:</strong>
                            <ul class="list-disc list-inside ml-4">
                                <li>Es una operación DDL (Lenguaje de Definición de Datos).</li>
                                <li>Elimina todas las filas de una tabla de forma rápida y eficiente, ya que no borra fila por fila, sino que reestablece la tabla a su estado inicial sin generar entradas detalladas en el log de transacciones.</li>
                                <li>No permite usar WHERE, siempre borra todas las filas.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Lección 4 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 4: Insertar, actualizar y eliminar datos (CRUD)</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Introducción al CRUD</h3>
                    <p class="text-gray-300 mb-4">CRUD es un acrónimo que representa las cuatro operaciones básicas en bases de datos:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li><strong>C</strong>reate (Crear): Insertar nuevos datos.</li>
                        <li><strong>R</strong>ead (Leer): Consultar datos existentes.</li>
                        <li><strong>U</strong>pdate (Actualizar): Modificar datos existentes.</li>
                        <li><strong>D</strong>elete (Eliminar): Borrar datos existentes.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Insertar datos en una tabla</h3>
                    <p class="text-gray-300 mb-4">Usamos el comando INSERT INTO para agregar nuevos registros a una tabla:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">insertar_datos.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Insertar un solo registro</span>
<span class="text-blue-400">INSERT INTO</span> usuarios (nombre, email, edad)
<span class="text-blue-400">VALUES</span> ('Ana García', 'ana@email.com', 28);

<span class="text-green-400">-- Insertar múltiples registros</span>
<span class="text-blue-400">INSERT INTO</span> usuarios (nombre, email, edad)
<span class="text-blue-400">VALUES</span>
    ('Carlos López', 'carlos@email.com', 35),
    ('María Rodríguez', 'maria@email.com', 42);</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>INSERT INTO: Indica que vamos a insertar datos en una tabla.</li>
                        <li>usuarios (nombre, email, edad): Especifica la tabla y las columnas donde insertaremos los datos.</li>
                        <li>VALUES: Introduce los valores que se insertarán en las columnas especificadas.</li>
                        <li>Para insertar múltiples registros, separamos cada conjunto de valores con comas.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Actualizar registros existentes</h3>
                    <p class="text-gray-300 mb-4">Utilizamos el comando UPDATE para modificar datos existentes en una tabla:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">actualizar_datos.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Actualizar un solo campo</span>
<span class="text-blue-400">UPDATE</span> usuarios
<span class="text-blue-400">SET</span> edad = 29
<span class="text-blue-400">WHERE</span> nombre = 'Ana García';

<span class="text-green-400">-- Actualizar múltiples campos</span>
<span class="text-blue-400">UPDATE</span> usuarios
<span class="text-blue-400">SET</span>
    email = 'nuevo_carlos@email.com',
    edad = 36
<span class="text-blue-400">WHERE</span> id = 2;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>UPDATE: Indica que vamos a modificar datos en una tabla.</li>
                        <li>SET: Especifica qué columnas se actualizarán y con qué valores.</li>
                        <li>WHERE: Define la condición para seleccionar qué registros se actualizarán.</li>
                        <li>Para actualizar múltiples campos, los separamos con comas después de SET.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Eliminar registros</h3>
                    <p class="text-gray-300 mb-4">El comando DELETE se usa para borrar registros de una tabla:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">eliminar_datos.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Eliminar un registro específico</span>
<span class="text-blue-400">DELETE FROM</span> usuarios
<span class="text-blue-400">WHERE</span> id = 3;

<span class="text-green-400">-- Eliminar múltiples registros</span>
<span class="text-blue-400">DELETE FROM</span> usuarios
<span class="text-blue-400">WHERE</span> edad > 50;

<span class="text-green-400">-- Eliminar todos los registros (¡cuidado!)</span>
<span class="text-blue-400">DELETE FROM</span> usuarios;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>DELETE FROM: Indica que vamos a eliminar datos de una tabla.</li>
                        <li>WHERE: Especifica qué registros se eliminarán. Sin WHERE, se eliminarán todos los registros.</li>
                        <li>Es crucial usar WHERE correctamente para evitar eliminar datos no deseados.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Consideraciones de integridad de los datos</h3>
                    <p class="text-gray-300 mb-4">Al realizar operaciones CRUD, es importante tener en cuenta:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>Usar transacciones para operaciones que involucren múltiples pasos.</li>
                        <li>Verificar las restricciones de integridad referencial antes de eliminar o actualizar datos.</li>
                        <li>Hacer copias de seguridad regularmente para prevenir pérdida de datos.</li>
                        <li>Utilizar consultas preparadas para prevenir inyecciones SQL.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Lección 5 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 5: Funciones agregadas y agrupamiento de datos</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Funciones agregadas</h3>
                    <p class="text-gray-300 mb-4">Las funciones agregadas nos permiten realizar cálculos sobre conjuntos de datos:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">funciones_agregadas.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Contar registros</span>
<span class="text-blue-400">SELECT COUNT</span>(*) <span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Sumar valores</span>
<span class="text-blue-400">SELECT SUM</span>(edad) <span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Promedio de valores</span>
<span class="text-blue-400">SELECT AVG</span>(edad) <span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Valor mínimo</span>
<span class="text-blue-400">SELECT MIN</span>(edad) <span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Valor máximo</span>
<span class="text-blue-400">SELECT MAX</span>(edad) <span class="text-blue-400">FROM</span> usuarios;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>COUNT(*): Cuenta el número total de filas en la tabla.</li>
                        <li>SUM(edad): Suma todos los valores de la columna 'edad'.</li>
                        <li>AVG(edad): Calcula el promedio de los valores en la columna 'edad'.</li>
                        <li>MIN(edad): Encuentra el valor mínimo en la columna 'edad'.</li>
                        <li>MAX(edad): Encuentra el valor máximo en la columna 'edad'.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Agrupamiento de resultados con GROUP BY</h3>
                    <p class="text-gray-300 mb-4">GROUP BY nos permite agrupar resultados basados en una o más columnas:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">group_by.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Contar usuarios por ciudad</span>
<span class="text-blue-400">SELECT</span> ciudad, <span class="text-blue-400">COUNT</span>(*) as total_usuarios
<span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">GROUP BY</span> ciudad;

<span class="text-green-400">-- Promedio de edad por género</span>
<span class="text-blue-400">SELECT</span> genero, <span class="text-blue-400">AVG</span>(edad) as edad_promedio
<span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">GROUP BY</span> genero;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>SELECT ciudad, COUNT(*): Selecciona la columna 'ciudad' y cuenta los registros.</li>
                        <li>GROUP BY ciudad: Agrupa los resultados por la columna 'ciudad'.</li>
                        <li>SELECT genero, AVG(edad): Selecciona 'genero' y calcula el promedio de 'edad'.</li>
                        <li>GROUP BY genero: Agrupa los resultados por la columna 'genero'.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Uso de HAVING para filtrar después de agrupar</h3>
                    <p class="text-gray-300 mb-4">HAVING nos permite filtrar resultados después de aplicar GROUP BY:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">having.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Ciudades con más de 100 usuarios</span>
<span class="text-blue-400">SELECT</span> ciudad, <span class="text-blue-400">COUNT</span>(*) as total_usuarios
<span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">GROUP BY</span> ciudad
<span class="text-blue-400">HAVING</span> total_usuarios > 100;

<span class="text-green-400">-- Géneros con edad promedio mayor a 30</span>
<span class="text-blue-400">SELECT</span> genero, <span class="text-blue-400">AVG</span>(edad) as edad_promedio
<span class="text-blue-400">FROM</span> usuarios
<span class="text-blue-400">GROUP BY</span> genero
<span class="text-blue-400">HAVING</span> edad_promedio > 30;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>HAVING total_usuarios > 100: Filtra grupos con más de 100 usuarios.</li>
                        <li>HAVING edad_promedio > 30: Filtra grupos con edad promedio mayor a 30.</li>
                        <li>HAVING se usa después de GROUP BY para filtrar grupos, mientras que WHERE filtra filas individuales antes de agrupar.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Aplicaciones para reportes y estadísticas</h3>
                    <p class="text-gray-300 mb-4">Estas funciones son esenciales para generar reportes y análisis estadísticos:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">reportes.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Reporte de ventas por categoría</span>
<span class="text-blue-400">SELECT</span> categoria, <span class="text-blue-400">SUM</span>(monto) as total_ventas,
       <span class="text-blue-400">COUNT</span>(*) as num_transacciones,
       <span class="text-blue-400">AVG</span>(monto) as venta_promedio
<span class="text-blue-400">FROM</span> ventas
<span class="text-blue-400">GROUP BY</span> categoria
<span class="text-blue-400">ORDER BY</span> total_ventas DESC;

<span class="text-green-400">-- Análisis de usuarios activos por mes</span>
<span class="text-blue-400">SELECT</span> EXTRACT(MONTH FROM fecha_login) as mes,
       <span class="text-blue-400">COUNT</span>(DISTINCT usuario_id) as usuarios_activos
<span class="text-blue-400">FROM</span> logs_usuario
<span class="text-blue-400">GROUP BY</span> mes
<span class="text-blue-400">ORDER BY</span> mes;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Estos ejemplos muestran cómo combinar funciones agregadas, GROUP BY, y ORDER BY para crear reportes útiles y análisis estadísticos de los datos.</p>
                </div>
            </div>
        </div>

        <!-- Lección 6 -->
        <div class="mb-8">
            <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
                <h2 class="text-2xl font-semibold code-font text-green-400">Lección 6: Joins: combinando datos de múltiples tablas</h2>
                <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>
            <div class="lesson-content mt-4 space-y-6">
                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Concepto de relaciones entre tablas</h3>
                    <p class="text-gray-300 mb-4">Las relaciones entre tablas nos permiten conectar datos relacionados en diferentes tablas. Esto es fundamental para la normalización de bases de datos y para realizar consultas complejas que involucren múltiples entidades.</p>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Tipos de joins</h3>
                    <p class="text-gray-300 mb-4">Existen varios tipos de joins que nos permiten combinar datos de diferentes maneras:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">tipos_joins.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- INNER JOIN</span>
<span class="text-blue-400">SELECT</span> u.nombre, p.producto
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">INNER JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id;

<span class="text-green-400">-- LEFT JOIN (Outer Left Join)</span>
<span class="text-blue-400">SELECT</span> u.nombre, p.producto
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">LEFT JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id;

<span class="text-green-400">-- RIGHT JOIN (Outer Right Join)</span>
<span class="text-blue-400">SELECT</span> u.nombre, p.producto
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">RIGHT JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id;

<span class="text-green-400">-- FULL JOIN</span>
<span class="text-blue-400">SELECT</span> u.nombre, p.producto
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">FULL JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>INNER JOIN: Devuelve solo las filas que tienen coincidencias en ambas tablas.</li>
                        <li>LEFT JOIN: Devuelve todas las filas de la tabla izquierda y las coincidencias de la tabla derecha.</li>
                        <li>RIGHT JOIN: Devuelve todas las filas de la tabla derecha y las coincidencias de la tabla izquierda.</li>
                        <li>FULL JOIN: Devuelve todas las filas cuando hay una coincidencia en una de las tablas.</li>
                        <li>ON u.id = p.usuario_id: Especifica la condición de unión entre las tablas.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Ejemplos prácticos de uso de joins en consultas complejas</h3>
                    <p class="text-gray-300 mb-4">Veamos algunos ejemplos más complejos de cómo usar joins en situaciones reales:</p>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="text-green-400">joins_complejos.sql</span>
                            <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                        </div>
                        <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Obtener usuarios con sus pedidos y detalles del producto</span>
<span class="text-blue-400">SELECT</span> u.nombre, p.fecha_pedido, pr.nombre_producto, pr.precio
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">INNER JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id
<span class="text-blue-400">INNER JOIN</span> productos pr <span class="text-blue-400">ON</span> p.producto_id = pr.id;

<span class="text-green-400">-- Encontrar usuarios sin pedidos</span>
<span class="text-blue-400">SELECT</span> u.nombre
<span class="text-blue-400">FROM</span> usuarios u
<span class="text-blue-400">LEFT JOIN</span> pedidos p <span class="text-blue-400">ON</span> u.id = p.usuario_id
<span class="text-blue-400">WHERE</span> p.id IS NULL;

<span class="text-green-400">-- Calcular el total de ventas por categoría de producto</span>
<span class="text-blue-400">SELECT</span> c.nombre_categoria, <span class="text-blue-400">SUM</span>(p.precio * dp.cantidad) as total_ventas
<span class="text-blue-400">FROM</span> categorias c
<span class="text-blue-400">INNER JOIN</span> productos p <span class="text-blue-400">ON</span> c.id = p.categoria_id
<span class="text-blue-400">INNER JOIN</span> detalles_pedido dp <span class="text-blue-400">ON</span> p.id = dp.producto_id
<span class="text-blue-400">GROUP BY</span> c.nombre_categoria
<span class="text-blue-400">ORDER BY</span> total_ventas DESC;</pre>
                    </div>
                    <p class="text-gray-300 mt-4">Explicación línea por línea:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>El primer ejemplo une tres tablas para obtener información detallada de pedidos.</li>
                        <li>El segundo ejemplo usa un LEFT JOIN para encontrar usuarios que no han realizado pedidos.</li>
                        <li>El tercer ejemplo combina múltiples joins con funciones agregadas para calcular ventas por categoría.</li>
                    </ul>
                </div>

                <div class="bg-gray-800/30 rounded-lg p-6">
                    <h3 class="text-xl text-green-400 mb-4">Consideraciones importantes</h3>
                    <p class="text-gray-300 mb-4">Al trabajar con joins, ten en cuenta lo siguiente:</p>
                    <ul class="list-disc list-inside text-gray-300 mb-4">
                        <li>El rendimiento puede verse afectado en joins complejos o con grandes volúmenes de datos.</li>
                        <li>Asegúrate de tener índices en las columnas utilizadas en las condiciones de join para mejorar el rendimiento.</li>
                        <li>Utiliza alias de tabla para mejorar la legibilidad de tus consultas, especialmente en joins múltiples.</li>
                        <li>Considera el uso de subconsultas o vistas en casos de joins muy complejos para mejorar la organización del código.</li>
                    </ul>
                </div>
            </div>
        </div>
<!-- Lección 7 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 7: Subconsultas y consultas avanzadas</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Introducción a las subconsultas</h3>
            <p class="text-gray-300 mb-4">Una subconsulta es una consulta SQL anidada dentro de otra consulta. Estas nos permiten realizar operaciones más complejas y obtener datos basados en resultados dinámicos. Las subconsultas pueden utilizarse en diferentes partes de una consulta SQL principal.</p>
        </div>

        <!-- Subconsultas en diferentes cláusulas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Subconsultas en SELECT, FROM y WHERE</h3>
            <p class="text-gray-300 mb-4">Las subconsultas pueden aparecer en diferentes partes de una consulta SQL. Veamos ejemplos de cada caso:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">subconsultas_ejemplos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Subconsulta en SELECT</span>
<span class="text-blue-400">SELECT</span>
    nombre,
    edad,
    (SELECT AVG(edad) FROM usuarios) as edad_promedio
<span class="text-blue-400">FROM</span> usuarios;

<span class="text-green-400">-- Subconsulta en FROM</span>
<span class="text-blue-400">SELECT</span> dept_nombre, total_empleados
<span class="text-blue-400">FROM</span> (
    <span class="text-blue-400">SELECT</span> d.nombre as dept_nombre, COUNT(*) as total_empleados
    <span class="text-blue-400">FROM</span> departamentos d
    <span class="text-blue-400">JOIN</span> empleados e ON d.id = e.departamento_id
    <span class="text-blue-400">GROUP BY</span> d.nombre
) as dept_stats;

<span class="text-green-400">-- Subconsulta en WHERE</span>
<span class="text-blue-400">SELECT</span> nombre, salario
<span class="text-blue-400">FROM</span> empleados
<span class="text-blue-400">WHERE</span> salario > (
    <span class="text-blue-400">SELECT</span> AVG(salario)
    <span class="text-blue-400">FROM</span> empleados
);</pre>
            </div>
        </div>

        <!-- Subconsultas correlacionadas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Subconsultas correlacionadas</h3>
            <p class="text-gray-300 mb-4">Una subconsulta correlacionada es aquella que hace referencia a columnas de la consulta exterior. Se ejecuta una vez por cada fila de la consulta principal:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">subconsultas_correlacionadas.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Encontrar empleados que ganan más que el promedio de su departamento</span>
<span class="text-blue-400">SELECT</span> e.nombre, e.salario, e.departamento_id
<span class="text-blue-400">FROM</span> empleados e
<span class="text-blue-400">WHERE</span> e.salario > (
    <span class="text-blue-400">SELECT</span> AVG(salario)
    <span class="text-blue-400">FROM</span> empleados e2
    <span class="text-blue-400">WHERE</span> e2.departamento_id = e.departamento_id
);

<span class="text-green-400">-- Encontrar el empleado mejor pagado de cada departamento</span>
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> empleados e1
<span class="text-blue-400">WHERE</span> salario = (
    <span class="text-blue-400">SELECT</span> MAX(salario)
    <span class="text-blue-400">FROM</span> empleados e2
    <span class="text-blue-400">WHERE</span> e2.departamento_id = e1.departamento_id
);</pre>
            </div>
        </div>

        <!-- CTEs -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Expresiones de tabla comunes (CTE)</h3>
            <p class="text-gray-300 mb-4">Las CTEs (Common Table Expressions) proporcionan una manera más legible de escribir subconsultas complejas. Se definen usando la cláusula WITH:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">ctes_ejemplos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- CTE básico</span>
<span class="text-blue-400">WITH</span> empleados_dept AS (
    <span class="text-blue-400">SELECT</span>
        departamento_id,
        COUNT(*) as total_empleados,
        AVG(salario) as salario_promedio
    <span class="text-blue-400">FROM</span> empleados
    <span class="text-blue-400">GROUP BY</span> departamento_id
)
<span class="text-blue-400">SELECT</span>
    d.nombre as departamento,
    ed.total_empleados,
    ed.salario_promedio
<span class="text-blue-400">FROM</span> empleados_dept ed
<span class="text-blue-400">JOIN</span> departamentos d ON ed.departamento_id = d.id;

<span class="text-green-400">-- CTE recursivo para jerarquías</span>
<span class="text-blue-400">WITH RECURSIVE</span> jerarquia_empleados AS (
    <span class="text-green-400">-- Caso base</span>
    <span class="text-blue-400">SELECT</span> id, nombre, supervisor_id, 1 as nivel
    <span class="text-blue-400">FROM</span> empleados
    <span class="text-blue-400">WHERE</span> supervisor_id IS NULL

    <span class="text-blue-400">UNION ALL</span>

    <span class="text-green-400">-- Caso recursivo</span>
    <span class="text-blue-400">SELECT</span>
        e.id,
        e.nombre,
        e.supervisor_id,
        je.nivel + 1
    <span class="text-blue-400">FROM</span> empleados e
    <span class="text-blue-400">JOIN</span> jerarquia_empleados je ON e.supervisor_id = je.id
)
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> jerarquia_empleados
<span class="text-blue-400">ORDER BY</span> nivel, id;</pre>
            </div>
        </div>

        <!-- Consideraciones y mejores prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Consideraciones importantes</h3>
            <p class="text-gray-300 mb-4">Al trabajar con subconsultas y CTEs, ten en cuenta lo siguiente:</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Las subconsultas pueden afectar el rendimiento si no están bien optimizadas.</li>
                <li>Las CTEs mejoran la legibilidad y mantenimiento del código.</li>
                <li>Las subconsultas correlacionadas pueden ser lentas con grandes conjuntos de datos.</li>
                <li>Considera usar índices apropiados para mejorar el rendimiento.</li>
                <li>Las CTEs recursivas son útiles para consultar datos jerárquicos, pero pueden consumir muchos recursos.</li>
            </ul>
        </div>
    </div>
</div>

<!-- Lección 8 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 8: Índices y optimización de consultas</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción a los índices -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">¿Qué son los índices y cómo funcionan?</h3>
            <p class="text-gray-300 mb-4">Los índices son estructuras de datos especiales que mejoran la velocidad de recuperación de datos en una base de datos. Funcionan de manera similar al índice de un libro, permitiendo encontrar información específica sin necesidad de revisar cada registro.</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Mejoran el rendimiento de las consultas SELECT</li>
                <li>Pueden ralentizar operaciones INSERT, UPDATE y DELETE</li>
                <li>Ocupan espacio adicional en disco</li>
                <li>Son actualizados automáticamente cuando los datos cambian</li>
            </ul>
        </div>

        <!-- Creación de índices -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Creación de índices en tablas</h3>
            <p class="text-gray-300 mb-4">La sintaxis básica para crear y eliminar índices:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">crear_indices.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear un índice simple</span>
<span class="text-blue-400">CREATE INDEX</span> idx_apellido
<span class="text-blue-400">ON</span> empleados(apellido);

<span class="text-green-400">-- Crear un índice único</span>
<span class="text-blue-400">CREATE UNIQUE INDEX</span> idx_email
<span class="text-blue-400">ON</span> usuarios(email);

<span class="text-green-400">-- Eliminar un índice</span>
<span class="text-blue-400">DROP INDEX</span> idx_apellido
<span class="text-blue-400">ON</span> empleados;</pre>
            </div>
        </div>

        <!-- Tipos de índices -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Tipos de índices: índices simples y compuestos</h3>
            <p class="text-gray-300 mb-4">Existen diferentes tipos de índices para diferentes necesidades:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">tipos_indices.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Índice simple</span>
<span class="text-blue-400">CREATE INDEX</span> idx_fecha
<span class="text-blue-400">ON</span> pedidos(fecha_pedido);

<span class="text-green-400">-- Índice compuesto (múltiples columnas)</span>
<span class="text-blue-400">CREATE INDEX</span> idx_nombre_apellido
<span class="text-blue-400">ON</span> empleados(nombre, apellido);

<span class="text-green-400">-- Índice parcial (con condición)</span>
<span class="text-blue-400">CREATE INDEX</span> idx_pedidos_activos
<span class="text-blue-400">ON</span> pedidos(fecha_pedido)
<span class="text-blue-400">WHERE</span> estado = 'activo';</pre>
            </div>
            <p class="text-gray-300 mt-4">Características de cada tipo:</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Índices simples: Ideales para columnas únicas frecuentemente consultadas</li>
                <li>Índices compuestos: Útiles para consultas que filtran por múltiples columnas</li>
                <li>Índices parciales: Optimizan consultas sobre un subconjunto específico de datos</li>
            </ul>
        </div>

        <!-- Buenas prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Buenas prácticas para optimización de consultas</h3>
            <p class="text-gray-300 mb-4">Recomendaciones para un uso eficiente de índices:</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Crear índices en columnas frecuentemente usadas en cláusulas WHERE</li>
                <li>Evitar crear demasiados índices (balance entre lectura y escritura)</li>
                <li>Considerar el orden de las columnas en índices compuestos</li>
                <li>Monitorear y mantener los índices regularmente</li>
                <li>Usar EXPLAIN para verificar el uso de índices</li>
            </ul>
        </div>

        <!-- EXPLAIN -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Explicación de EXPLAIN para análisis de consultas</h3>
            <p class="text-gray-300 mb-4">EXPLAIN es una herramienta poderosa para analizar cómo MySQL ejecuta las consultas:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">explain_ejemplos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Analizar una consulta simple</span>
<span class="text-blue-400">EXPLAIN</span>
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> empleados
<span class="text-blue-400">WHERE</span> apellido = 'García';

<span class="text-green-400">-- Analizar una consulta con JOIN</span>
<span class="text-blue-400">EXPLAIN</span>
<span class="text-blue-400">SELECT</span> e.nombre, d.nombre_dept
<span class="text-blue-400">FROM</span> empleados e
<span class="text-blue-400">JOIN</span> departamentos d
<span class="text-blue-400">ON</span> e.departamento_id = d.id
<span class="text-blue-400">WHERE</span> e.salario > 50000;</pre>
            </div>
            <p class="text-gray-300 mt-4">Interpretación de EXPLAIN:</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>rows: Número estimado de filas a examinar</li>
                <li>type: Método de acceso (const, ref, range, index, ALL)</li>
                <li>possible_keys: Índices que podrían usarse</li>
                <li>key: Índice realmente usado</li>
                <li>Extra: Información adicional sobre la ejecución</li>
            </ul>
        </div>

        <!-- Ejercicios prácticos -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Ejercicios prácticos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">ejercicios_indices.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- 1. Crear una tabla de prueba</span>
<span class="text-blue-400">CREATE TABLE</span> ventas (
    id INT PRIMARY KEY,
    fecha DATE,
    cliente_id INT,
    monto DECIMAL(10,2)
);

<span class="text-green-400">-- 2. Crear índices apropiados</span>
<span class="text-blue-400">CREATE INDEX</span> idx_fecha ON ventas(fecha);
<span class="text-blue-400">CREATE INDEX</span> idx_cliente_fecha ON ventas(cliente_id, fecha);

<span class="text-green-400">-- 3. Analizar consultas con EXPLAIN</span>
<span class="text-blue-400">EXPLAIN</span>
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> ventas
<span class="text-blue-400">WHERE</span> fecha BETWEEN '2023-01-01' AND '2023-12-31'
<span class="text-blue-400">AND</span> cliente_id = 1000;</pre>
            </div>
        </div>
    </div>
</div>

<!-- Lección 9 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 9: Triggers y procedimientos almacenados</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción a los triggers -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Introducción a los triggers (disparadores)</h3>
            <p class="text-gray-300 mb-4">Los triggers son objetos de la base de datos que se ejecutan automáticamente en respuesta a ciertos eventos (INSERT, UPDATE, DELETE) en una tabla específica. Son útiles para mantener la integridad de los datos y automatizar tareas.</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Se ejecutan automáticamente</li>
                <li>Pueden ejecutarse BEFORE o AFTER de un evento</li>
                <li>Ayudan a mantener la integridad referencial</li>
                <li>Pueden modificar otras tablas</li>
            </ul>
        </div>

        <!-- Creación de triggers -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Creación y uso de triggers</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">crear_triggers.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Trigger BEFORE INSERT</span>
<span class="text-blue-400">DELIMITER</span> //
<span class="text-blue-400">CREATE TRIGGER</span> before_employee_insert
<span class="text-blue-400">BEFORE INSERT ON</span> empleados
<span class="text-blue-400">FOR EACH ROW</span>
<span class="text-blue-400">BEGIN</span>
    IF NEW.salario < 0 THEN
        SET NEW.salario = 0;
    END IF;
<span class="text-blue-400">END</span>//
<span class="text-blue-400">DELIMITER</span> ;

<span class="text-green-400">-- Trigger AFTER UPDATE</span>
<span class="text-blue-400">CREATE TRIGGER</span> after_salary_update
<span class="text-blue-400">AFTER UPDATE ON</span> empleados
<span class="text-blue-400">FOR EACH ROW</span>
<span class="text-blue-400">BEGIN</span>
    <span class="text-blue-400">INSERT INTO</span> historial_salarios
    (empleado_id, salario_anterior, salario_nuevo, fecha_cambio)
    VALUES
    (NEW.id, OLD.salario, NEW.salario, NOW());
<span class="text-blue-400">END</span>;</pre>
            </div>
        </div>

        <!-- Procedimientos almacenados -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Procedimientos almacenados: estructura y creación</h3>
            <p class="text-gray-300 mb-4">Los procedimientos almacenados son conjuntos de instrucciones SQL que se pueden reutilizar. Pueden aceptar parámetros y devolver resultados:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">procedimientos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Procedimiento básico</span>
<span class="text-blue-400">DELIMITER</span> //
<span class="text-blue-400">CREATE PROCEDURE</span> obtener_empleados_dept(
    IN p_dept_id INT
)
<span class="text-blue-400">BEGIN</span>
    <span class="text-blue-400">SELECT</span> *
    <span class="text-blue-400">FROM</span> empleados
    <span class="text-blue-400">WHERE</span> departamento_id = p_dept_id;
<span class="text-blue-400">END</span>//
<span class="text-blue-400">DELIMITER</span> ;

<span class="text-green-400">-- Llamar al procedimiento</span>
<span class="text-blue-400">CALL</span> obtener_empleados_dept(1);</pre>
            </div>
        </div>

        <!-- Parámetros en procedimientos -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Parámetros de entrada y salida en procedimientos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">parametros_procedimientos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Procedimiento con múltiples parámetros</span>
<span class="text-blue-400">DELIMITER</span> //
<span class="text-blue-400">CREATE PROCEDURE</span> calcular_salario_total(
    IN p_dept_id INT,
    OUT p_total_salario DECIMAL(10,2),
    OUT p_num_empleados INT
)
<span class="text-blue-400">BEGIN</span>
    <span class="text-blue-400">SELECT</span>
        COUNT(*),
        SUM(salario)
    <span class="text-blue-400">INTO</span>
        p_num_empleados,
        p_total_salario
    <span class="text-blue-400">FROM</span> empleados
    <span class="text-blue-400">WHERE</span> departamento_id = p_dept_id;
<span class="text-blue-400">END</span>//
<span class="text-blue-400">DELIMITER</span> ;

<span class="text-green-400">-- Usar el procedimiento con parámetros de salida</span>
<span class="text-blue-400">SET</span> @total = 0;
<span class="text-blue-400">SET</span> @num = 0;
<span class="text-blue-400">CALL</span> calcular_salario_total(1, @total, @num);
<span class="text-blue-400">SELECT</span> @total as total_salario, @num as numero_empleados;</pre>
            </div>
        </div>

        <!-- Comparación -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Comparación entre triggers y procedimientos almacenados</h3>
            <div class="grid grid-cols-2 gap-4 text-gray-300">
                <div>
                    <h4 class="font-bold mb-2">Triggers</h4>
                    <ul class="list-disc list-inside">
                        <li>Se ejecutan automáticamente</li>
                        <li>Responden a eventos específicos</li>
                        <li>No pueden ser llamados directamente</li>
                        <li>Útiles para mantener integridad</li>
                        <li>No aceptan parámetros</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Procedimientos almacenados</h4>
                    <ul class="list-disc list-inside">
                        <li>Se ejecutan manualmente</li>
                        <li>Pueden contener lógica compleja</li>
                        <li>Pueden ser llamados desde aplicaciones</li>
                        <li>Aceptan parámetros</li>
                        <li>Pueden retornar resultados</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Mejores prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Mejores prácticas y consideraciones</h3>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Usar triggers con moderación para evitar efectos cascada</li>
                <li>Documentar bien los procedimientos almacenados</li>
                <li>Manejar errores adecuadamente</li>
                <li>Considerar el impacto en el rendimiento</li>
                <li>Mantener la lógica de negocio consistente</li>
            </ul>
        </div>
    </div>
</div>

<!-- Lección 10 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 10: Manejo de transacciones y control de concurrencia</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Introducción a las transacciones</h3>
            <p class="text-gray-300 mb-4">Una transacción es una unidad de trabajo que agrupa una o más operaciones SQL. Estas operaciones deben ejecutarse completamente o no ejecutarse en absoluto, garantizando la integridad de los datos.</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">transaccion_basica.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Ejemplo básico de transacción</span>
<span class="text-blue-400">START TRANSACTION</span>;  <span class="text-gray-400">-- Inicia una nueva transacción</span>

<span class="text-blue-400">UPDATE</span> cuentas
<span class="text-blue-400">SET</span> saldo = saldo - 1000
<span class="text-blue-400">WHERE</span> id = 1;  <span class="text-gray-400">-- Resta dinero de una cuenta</span>

<span class="text-blue-400">UPDATE</span> cuentas
<span class="text-blue-400">SET</span> saldo = saldo + 1000
<span class="text-blue-400">WHERE</span> id = 2;  <span class="text-gray-400">-- Suma dinero a otra cuenta</span>

<span class="text-blue-400">COMMIT</span>;  <span class="text-gray-400">-- Confirma los cambios si todo está correcto</span>
<span class="text-green-400">-- Si hubiera un error, se usaría ROLLBACK para deshacer los cambios</span></pre>
            </div>
        </div>

        <!-- Propiedades ACID -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Propiedades ACID</h3>
            <div class="grid grid-cols-2 gap-4 text-gray-300 mb-4">
                <div>
                    <h4 class="font-bold mb-2">Atomicidad (Atomicity)</h4>
                    <p>Una transacción es una unidad atómica: todo o nada.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Consistencia (Consistency)</h4>
                    <p>La base de datos debe permanecer en un estado válido.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Aislamiento (Isolation)</h4>
                    <p>Las transacciones son independientes entre sí.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Durabilidad (Durability)</h4>
                    <p>Los cambios confirmados son permanentes.</p>
                </div>
            </div>
        </div>

        <!-- Control de transacciones -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Control de transacciones: COMMIT y ROLLBACK</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">control_transacciones.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Ejemplo de transacción con manejo de errores</span>
<span class="text-blue-400">START TRANSACTION</span>;  <span class="text-gray-400">-- Inicia la transacción</span>

<span class="text-blue-400">SAVEPOINT</span> punto_inicio;  <span class="text-gray-400">-- Crea un punto de guardado</span>

<span class="text-blue-400">INSERT INTO</span> pedidos (cliente_id, producto_id, cantidad)
<span class="text-blue-400">VALUES</span> (1, 100, 5);  <span class="text-gray-400">-- Inserta un nuevo pedido</span>

<span class="text-blue-400">UPDATE</span> inventario
<span class="text-blue-400">SET</span> stock = stock - 5
<span class="text-blue-400">WHERE</span> producto_id = 100;  <span class="text-gray-400">-- Actualiza el inventario</span>

<span class="text-green-400">-- Verificar si hay suficiente stock</span>
<span class="text-blue-400">IF</span> (SELECT stock FROM inventario WHERE producto_id = 100) < 0 THEN
    <span class="text-blue-400">ROLLBACK TO</span> punto_inicio;  <span class="text-gray-400">-- Revierte hasta el punto de guardado</span>
<span class="text-blue-400">ELSE</span>
    <span class="text-blue-400">COMMIT</span>;  <span class="text-gray-400">-- Confirma los cambios</span>
<span class="text-blue-400">END IF</span>;</pre>
            </div>
        </div>

        <!-- Control de concurrencia -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Conceptos de control de concurrencia</h3>
            <p class="text-gray-300 mb-4">El control de concurrencia maneja el acceso simultáneo a los datos:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">concurrencia.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Bloqueo explícito de tabla</span>
<span class="text-blue-400">LOCK TABLES</span> usuarios <span class="text-blue-400">WRITE</span>;  <span class="text-gray-400">-- Bloquea la tabla para escritura</span>

<span class="text-green-400">-- Realizar operaciones...</span>
<span class="text-blue-400">UPDATE</span> usuarios
<span class="text-blue-400">SET</span> status = 'activo'
<span class="text-blue-400">WHERE</span> id = 1;

<span class="text-blue-400">UNLOCK TABLES</span>;  <span class="text-gray-400">-- Libera los bloqueos</span>

<span class="text-green-400">-- Bloqueo a nivel de fila usando SELECT FOR UPDATE</span>
<span class="text-blue-400">START TRANSACTION</span>;

<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> inventario
<span class="text-blue-400">WHERE</span> producto_id = 100
<span class="text-blue-400">FOR UPDATE</span>;  <span class="text-gray-400">-- Bloquea las filas seleccionadas</span>

<span class="text-green-400">-- Realizar operaciones...</span>

<span class="text-blue-400">COMMIT</span>;  <span class="text-gray-400">-- Libera los bloqueos</span></pre>
            </div>
        </div>

        <!-- Niveles de aislamiento -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Niveles de aislamiento de transacciones</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">niveles_aislamiento.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Configurar nivel de aislamiento</span>
<span class="text-blue-400">SET TRANSACTION ISOLATION LEVEL</span> READ COMMITTED;  <span class="text-gray-400">-- Nivel básico de aislamiento</span>

<span class="text-green-400">-- Ejemplo con REPEATABLE READ</span>
<span class="text-blue-400">SET TRANSACTION ISOLATION LEVEL</span> REPEATABLE READ;  <span class="text-gray-400">-- Previene lecturas no repetibles</span>
<span class="text-blue-400">START TRANSACTION</span>;

<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> productos
<span class="text-blue-400">WHERE</span> categoria = 'electrónicos';  <span class="text-gray-400">-- Primera lectura</span>

<span class="text-green-400">-- Otras transacciones no pueden modificar estos datos...</span>

<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> productos
<span class="text-blue-400">WHERE</span> categoria = 'electrónicos';  <span class="text-gray-400">-- Segunda lectura (mismo resultado garantizado)</span>

<span class="text-blue-400">COMMIT</span>;</pre>
            </div>
            <div class="mt-4">
                <h4 class="text-green-400 mb-2">Niveles de aislamiento disponibles:</h4>
                <ul class="list-disc list-inside text-gray-300">
                    <li>READ UNCOMMITTED: Menor aislamiento, permite lecturas sucias</li>
                    <li>READ COMMITTED: Previene lecturas sucias</li>
                    <li>REPEATABLE READ: Previene lecturas no repetibles</li>
                    <li>SERIALIZABLE: Mayor aislamiento, previene lecturas fantasma</li>
                </ul>
            </div>
        </div>

        <!-- Mejores prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Mejores prácticas en transacciones</h3>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Mantener las transacciones lo más cortas posible</li>
                <li>Usar el nivel de aislamiento apropiado según los requerimientos</li>
                <li>Manejar adecuadamente los errores y rollbacks</li>
                <li>Evitar bloqueos innecesarios de tablas</li>
                <li>Considerar el impacto en el rendimiento al elegir niveles de aislamiento</li>
            </ul>
        </div>
    </div>
</div>

<!-- Lección 11 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 11: Seguridad en bases de datos</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Gestión de usuarios y permisos</h3>
            <p class="text-gray-300 mb-4">La seguridad en bases de datos comienza con una adecuada gestión de usuarios y sus permisos. Cada usuario debe tener solo los privilegios necesarios para realizar sus tareas específicas.</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">gestion_usuarios.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear un nuevo usuario</span>
<span class="text-blue-400">CREATE USER</span> 'analista'@'localhost'
<span class="text-blue-400">IDENTIFIED BY</span> 'contraseña_segura';  <span class="text-gray-400">-- Crear usuario con contraseña</span>

<span class="text-green-400">-- Otorgar permisos básicos de lectura</span>
<span class="text-blue-400">GRANT SELECT</span>
<span class="text-blue-400">ON</span> empresa.*
<span class="text-blue-400">TO</span> 'analista'@'localhost';  <span class="text-gray-400">-- Permisos de lectura en todas las tablas</span>

<span class="text-green-400">-- Otorgar permisos específicos</span>
<span class="text-blue-400">GRANT INSERT, UPDATE</span>
<span class="text-blue-400">ON</span> empresa.reportes
<span class="text-blue-400">TO</span> 'analista'@'localhost';  <span class="text-gray-400">-- Permisos adicionales en tabla específica</span>

<span class="text-green-400">-- Revocar permisos</span>
<span class="text-blue-400">REVOKE UPDATE</span>
<span class="text-blue-400">ON</span> empresa.reportes
<span class="text-blue-400">FROM</span> 'analista'@'localhost';</pre>
            </div>
        </div>

        <!-- Roles y privilegios -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Roles y niveles de privilegios</h3>
            <div class="grid grid-cols-2 gap-4 text-gray-300 mb-4">
                <div>
                    <h4 class="font-bold mb-2">Roles predefinidos</h4>
                    <ul class="list-disc list-inside">
                        <li>Administrador (todos los privilegios)</li>
                        <li>Desarrollador (SELECT, INSERT, UPDATE, DELETE)</li>
                        <li>Analista (SELECT)</li>
                        <li>Backup (BACKUP, SELECT)</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Privilegios comunes</h4>
                    <ul class="list-disc list-inside">
                        <li>SELECT: Lectura de datos</li>
                        <li>INSERT: Inserción de registros</li>
                        <li>UPDATE: Modificación de datos</li>
                        <li>DELETE: Eliminación de registros</li>
                    </ul>
                </div>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">roles_privilegios.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear un rol</span>
<span class="text-blue-400">CREATE ROLE</span> 'analista_ventas';  <span class="text-gray-400">-- Crear nuevo rol</span>

<span class="text-green-400">-- Asignar privilegios al rol</span>
<span class="text-blue-400">GRANT SELECT</span>
<span class="text-blue-400">ON</span> empresa.ventas
<span class="text-blue-400">TO</span> 'analista_ventas';

<span class="text-green-400">-- Asignar rol a usuario</span>
<span class="text-blue-400">GRANT</span> 'analista_ventas'
<span class="text-blue-400">TO</span> 'analista'@'localhost';</pre>
            </div>
        </div>

        <!-- Seguridad a nivel de tabla y columna -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Seguridad granular</h3>
            <p class="text-gray-300 mb-4">La seguridad puede aplicarse a diferentes niveles de granularidad:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">seguridad_granular.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Permisos a nivel de columna</span>
<span class="text-blue-400">GRANT SELECT</span> (nombre, departamento)
<span class="text-blue-400">ON</span> empresa.empleados
<span class="text-blue-400">TO</span> 'analista'@'localhost';  <span class="text-gray-400">-- Solo acceso a columnas específicas</span>

<span class="text-green-400">-- Permisos con condiciones</span>
<span class="text-blue-400">GRANT SELECT</span>
<span class="text-blue-400">ON</span> empresa.ventas
<span class="text-blue-400">TO</span> 'vendedor'@'localhost'
<span class="text-blue-400">WHERE</span> region = 'Norte';  <span class="text-gray-400">-- Acceso limitado por condición</span></pre>
            </div>
        </div>

        <!-- Encriptación -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Encriptación y seguridad de datos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">encriptacion.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Encriptar datos sensibles</span>
<span class="text-blue-400">UPDATE</span> usuarios
<span class="text-blue-400">SET</span> password = AES_ENCRYPT('contraseña123', 'llave_secreta')
<span class="text-blue-400">WHERE</span> id = 1;  <span class="text-gray-400">-- Encriptar contraseña</span>

<span class="text-green-400">-- Desencriptar datos</span>
<span class="text-blue-400">SELECT</span>
    username,
    AES_DECRYPT(password, 'llave_secreta') as password_descifrado
<span class="text-blue-400">FROM</span> usuarios;</pre>
            </div>
        </div>

        <!-- Auditoría -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Auditoría de bases de datos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">auditoria.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Crear tabla de auditoría</span>
<span class="text-blue-400">CREATE TABLE</span> log_auditoria (
    id INT AUTO_INCREMENT PRIMARY KEY,
    usuario VARCHAR(50),
    accion VARCHAR(50),
    tabla VARCHAR(50),
    fecha TIMESTAMP,
    datos_antiguos TEXT,
    datos_nuevos TEXT
);

<span class="text-green-400">-- Trigger para auditar cambios</span>
<span class="text-blue-400">CREATE TRIGGER</span> auditoria_update
<span class="text-blue-400">AFTER UPDATE ON</span> empleados
<span class="text-blue-400">FOR EACH ROW</span>
<span class="text-blue-400">BEGIN</span>
    <span class="text-blue-400">INSERT INTO</span> log_auditoria
    (usuario, accion, tabla, fecha, datos_antiguos, datos_nuevos)
    VALUES
    (CURRENT_USER(), 'UPDATE', 'empleados', NOW(),
     JSON_OBJECT('salario', OLD.salario),
     JSON_OBJECT('salario', NEW.salario));
<span class="text-blue-400">END</span>;</pre>
            </div>
        </div>

        <!-- Mejores prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Mejores prácticas de seguridad</h3>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Aplicar el principio de mínimo privilegio</li>
                <li>Cambiar contraseñas regularmente</li>
                <li>Mantener actualizados los sistemas</li>
                <li>Realizar auditorías regulares</li>
                <li>Encriptar datos sensibles</li>
                <li>Implementar políticas de contraseñas fuertes</li>
                <li>Realizar copias de seguridad regulares</li>
                <li>Documentar todos los cambios en permisos</li>
            </ul>
        </div>
    </div>
</div>


<!-- Lección 12 -->
<div class="mb-8">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Lección 12: Exportación, importación y backups de bases de datos</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Introducción -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Exportación de datos</h3>
            <p class="text-gray-300 mb-4">La exportación de datos permite transferir información entre sistemas y crear respaldos en diferentes formatos.</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">exportacion_datos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Exportar a CSV</span>
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">INTO OUTFILE</span> '/ruta/archivo.csv'
<span class="text-blue-400">FIELDS TERMINATED BY</span> ','
<span class="text-blue-400">ENCLOSED BY</span> '"'
<span class="text-blue-400">LINES TERMINATED BY</span> '\n'
<span class="text-blue-400">FROM</span> empleados;  <span class="text-gray-400">-- Exporta tabla completa a CSV</span>

<span class="text-green-400">-- Exportar a JSON</span>
<span class="text-blue-400">SELECT</span> JSON_OBJECT(
    'id', id,
    'nombre', nombre,
    'departamento', departamento
)
<span class="text-blue-400">FROM</span> empleados
<span class="text-blue-400">INTO OUTFILE</span> '/ruta/datos.json';  <span class="text-gray-400">-- Exporta en formato JSON</span></pre>
            </div>
        </div>

        <!-- Importación de datos -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Importación de datos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">importacion_datos.sql</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">-- Importar desde CSV</span>
<span class="text-blue-400">LOAD DATA INFILE</span> '/ruta/archivo.csv'
<span class="text-blue-400">INTO TABLE</span> empleados
<span class="text-blue-400">FIELDS TERMINATED BY</span> ','
<span class="text-blue-400">ENCLOSED BY</span> '"'
<span class="text-blue-400">LINES TERMINATED BY</span> '\n'
<span class="text-blue-400">IGNORE</span> 1 LINES;  <span class="text-gray-400">-- Ignora la primera línea (encabezados)</span>

<span class="text-green-400">-- Importar datos JSON</span>
<span class="text-blue-400">INSERT INTO</span> empleados
<span class="text-blue-400">SELECT</span> *
<span class="text-blue-400">FROM</span> JSON_TABLE(
    '[{"id": 1, "nombre": "Juan"}]',
    '$[*]' COLUMNS(
        id INT PATH '$.id',
        nombre VARCHAR(50) PATH '$.nombre'
    )
) as datos;</pre>
            </div>
        </div>

        <!-- Backups -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Copias de seguridad (backups)</h3>
            <div class="grid grid-cols-2 gap-4 text-gray-300 mb-4">
                <div>
                    <h4 class="font-bold mb-2">Tipos de backup</h4>
                    <ul class="list-disc list-inside">
                        <li>Backup completo</li>
                        <li>Backup incremental</li>
                        <li>Backup diferencial</li>
                        <li>Backup lógico</li>
                        <li>Backup físico</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-2">Consideraciones</h4>
                    <ul class="list-disc list-inside">
                        <li>Frecuencia de backups</li>
                        <li>Espacio de almacenamiento</li>
                        <li>Tiempo de restauración</li>
                        <li>Verificación de integridad</li>
                        <li>Políticas de retención</li>
                    </ul>
                </div>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">backup_comandos.sh</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400"># Backup completo usando mysqldump</span>
mysqldump -u usuario -p nombre_base > backup_completo.sql

<span class="text-green-400"># Backup de tablas específicas</span>
mysqldump -u usuario -p nombre_base tabla1 tabla2 > backup_tablas.sql

<span class="text-green-400"># Backup con compresión</span>
mysqldump -u usuario -p nombre_base | gzip > backup.sql.gz</pre>
            </div>
        </div>

        <!-- Restauración -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Restauración de bases de datos</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">restauracion.sh</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400"># Restaurar backup completo</span>
mysql -u usuario -p nombre_base < backup_completo.sql

<span class="text-green-400"># Restaurar backup comprimido</span>
gunzip < backup.sql.gz | mysql -u usuario -p nombre_base

<span class="text-green-400"># Restaurar tablas específicas</span>
mysql -u usuario -p nombre_base < backup_tablas.sql</pre>
            </div>
        </div>

        <!-- Estrategias y mejores prácticas -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Estrategias de respaldo y recuperación</h3>
            <div class="mb-4">
                <h4 class="text-green-400 mb-2">Plan de backup efectivo</h4>
                <ul class="list-disc list-inside text-gray-300">
                    <li>Establecer una política de respaldo clara</li>
                    <li>Definir la frecuencia de los backups</li>
                    <li>Implementar diferentes tipos de backup</li>
                    <li>Verificar regularmente la integridad de los backups</li>
                    <li>Documentar los procedimientos de respaldo y recuperación</li>
                </ul>
            </div>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">script_backup.sh</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">#!/bin/bash</span>
<span class="text-green-400"># Script automatizado de backup</span>

FECHA=$(date +%Y%m%d)
BACKUP_DIR="/backups"
DB_NAME="mi_base"
USER="usuario"
PASS="contraseña"

<span class="text-green-400"># Crear backup</span>
mysqldump -u $USER -p$PASS $DB_NAME | gzip > $BACKUP_DIR/backup_$FECHA.sql.gz

<span class="text-green-400"># Eliminar backups antiguos (más de 30 días)</span>
find $BACKUP_DIR -name "backup_*.sql.gz" -mtime +30 -delete</pre>
            </div>
        </div>

        <!-- Conclusión del curso -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Conclusión del curso</h3>
            <p class="text-gray-300 mb-4">Has completado todas las lecciones del curso de SQL. Ahora tienes conocimientos sobre:</p>
            <ul class="list-disc list-inside text-gray-300 mb-4">
                <li>Fundamentos de SQL y manipulación de datos</li>
                <li>Diseño y optimización de bases de datos</li>
                <li>Seguridad y gestión de usuarios</li>
                <li>Transacciones y concurrencia</li>
                <li>Respaldo y recuperación de datos</li>
            </ul>
            <p class="text-gray-300">Recuerda que la práctica constante es clave para dominar SQL. ¡Continúa explorando y desarrollando tus habilidades!</p>
        </div>
    </div>
</div>

<!-- Sección: USO con PHP -->
<div class="mb-12 fade-in">
    <button class="w-full bg-gray-800/50 p-6 rounded-lg border border-green-500/20 hover:border-green-500/40 transition-all flex justify-between items-center lesson-header">
        <h2 class="text-2xl font-semibold code-font text-green-400">Uso práctico con PHP</h2>
        <svg class="w-6 h-6 text-green-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
        </svg>
    </button>
    <div class="lesson-content mt-4 space-y-6">
        <!-- Conexión básica -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Conexión a la base de datos</h3>
            <p class="text-gray-300 mb-4">Existen dos formas principales de conectar PHP con MySQL:</p>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-gray-900/50 p-4 rounded-lg">
                    <h4 class="text-green-400 mb-2">MySQLi</h4>
                    <p class="text-gray-300 text-sm">Específica para MySQL, con soporte para procedimientos almacenados</p>
                </div>
                <div class="bg-gray-900/50 p-4 rounded-lg">
                    <h4 class="text-green-400 mb-2">PDO</h4>
                    <p class="text-gray-300 text-sm">Compatible con múltiples bases de datos, más flexible</p>
                </div>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">conexion.php</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">// Usando MySQLi (orientado a objetos)</span>
$mysqli = new mysqli('localhost', 'usuario', 'contraseña', 'basedatos');

<span class="text-green-400">// Verificar conexión</span>
if ($mysqli->connect_error) {
    die('Error de conexión: ' . $mysqli->connect_error);
}

<span class="text-green-400">// Usando PDO</span>
try {
    $pdo = new PDO(
        'mysql:host=localhost;dbname=basedatos;charset=utf8mb4',
        'usuario',
        'contraseña',
        [PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION]
    );
} catch (PDOException $e) {
    die('Error de conexión: ' . $e->getMessage());
}</pre>
            </div>
        </div>

        <!-- CRUD con PHP -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Operaciones CRUD</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">crud_operaciones.php</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">// CREATE - Insertar datos</span>
function crearUsuario($pdo, $nombre, $email) {
    $sql = "INSERT INTO usuarios (nombre, email) VALUES (?, ?)";
    $stmt = $pdo->prepare($sql);
    return $stmt->execute([$nombre, $email]);
}

<span class="text-green-400">// READ - Leer datos</span>
function obtenerUsuarios($pdo) {
    $sql = "SELECT * FROM usuarios";
    return $pdo->query($sql)->fetchAll(PDO::FETCH_ASSOC);
}

<span class="text-green-400">// UPDATE - Actualizar datos</span>
function actualizarUsuario($pdo, $id, $nombre) {
    $sql = "UPDATE usuarios SET nombre = ? WHERE id = ?";
    $stmt = $pdo->prepare($sql);
    return $stmt->execute([$nombre, $id]);
}

<span class="text-green-400">// DELETE - Eliminar datos</span>
function eliminarUsuario($pdo, $id) {
    $sql = "DELETE FROM usuarios WHERE id = ?";
    $stmt = $pdo->prepare($sql);
    return $stmt->execute([$id]);
}</pre>
            </div>
        </div>

        <!-- Transacciones -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Manejo de transacciones</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">transacciones.php</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">// Ejemplo de transferencia bancaria usando transacciones</span>
function transferirDinero($pdo, $cuentaOrigen, $cuentaDestino, $monto) {
    try {
        $pdo->beginTransaction();

        <span class="text-green-400">// Restar de cuenta origen</span>
        $sql1 = "UPDATE cuentas SET saldo = saldo - ? WHERE id = ?";
        $stmt1 = $pdo->prepare($sql1);
        $stmt1->execute([$monto, $cuentaOrigen]);

        <span class="text-green-400">// Sumar a cuenta destino</span>
        $sql2 = "UPDATE cuentas SET saldo = saldo + ? WHERE id = ?";
        $stmt2 = $pdo->prepare($sql2);
        $stmt2->execute([$monto, $cuentaDestino]);

        $pdo->commit();
        return true;
    } catch (Exception $e) {
        $pdo->rollBack();
        return false;
    }
}</pre>
            </div>
        </div>

        <!-- Seguridad -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Prácticas de seguridad</h3>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">seguridad.php</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<span class="text-green-400">// Prevención de SQL Injection</span>
function buscarUsuarioSeguro($pdo, $termino) {
    $sql = "SELECT * FROM usuarios WHERE nombre LIKE ?";
    $stmt = $pdo->prepare($sql);
    $stmt->execute(["%$termino%"]);
    return $stmt->fetchAll();
}

<span class="text-green-400">// Manejo seguro de contraseñas</span>
function guardarUsuario($pdo, $usuario, $password) {
    $hash = password_hash($password, PASSWORD_DEFAULT);
    $sql = "INSERT INTO usuarios (usuario, password) VALUES (?, ?)";
    $stmt = $pdo->prepare($sql);
    return $stmt->execute([$usuario, $hash]);
}</pre>
            </div>
        </div>

        <!-- Ejemplo práctico completo -->
        <div class="bg-gray-800/30 rounded-lg p-6">
            <h3 class="text-xl text-green-400 mb-4">Ejemplo de aplicación</h3>
            <p class="text-gray-300 mb-4">Sistema simple de gestión de usuarios:</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="text-green-400">sistema_usuarios.php</span>
                    <button class="text-sm text-gray-400 hover:text-green-400">copiar</button>
                </div>
                <pre class="p-4 text-gray-300 code-font">
<?php
require_once 'conexion.php';

class SistemaUsuarios {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function registrarUsuario($nombre, $email, $password) {
        try {
            $this->pdo->beginTransaction();

            $sql = "INSERT INTO usuarios (nombre, email, password)
                   VALUES (?, ?, ?)";
            $stmt = $this->pdo->prepare($sql);
            $stmt->execute([
                $nombre,
                $email,
                password_hash($password, PASSWORD_DEFAULT)
            ]);

            $this->pdo->commit();
            return true;
        } catch (Exception $e) {
            $this->pdo->rollBack();
            return false;
        }
    }

    public function autenticarUsuario($email, $password) {
        $sql = "SELECT * FROM usuarios WHERE email = ?";
        $stmt = $this->pdo->prepare($sql);
        $stmt->execute([$email]);
        $usuario = $stmt->fetch();

        if ($usuario && password_verify($password, $usuario['password'])) {
            return $usuario;
        }
        return false;
    }
}</pre>
            </div>
        </div>
    </div>
</div>


    </main>

    <script>
        // Funcionalidad para los desplegables con animación
        document.querySelectorAll('.lesson-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const arrow = header.querySelector('svg');

                content.style.maxHeight = content.classList.contains('active') ? '0px' : `${content.scrollHeight}px`;
                content.classList.toggle('active');

                arrow.style.transition = 'transform 0.3s ease';
                arrow.style.transform = content.classList.contains('active')
                    ? 'rotate(180deg)'
                    : 'rotate(0)';
            });
        });

        // Funcionalidad para copiar código con animación
        document.querySelectorAll('.code-block button').forEach(button => {
            button.addEventListener('click', () => {
                const code = button.closest('.code-block').querySelector('pre').textContent;
                navigator.clipboard.writeText(code);

                button.textContent = 'Copiado 🔆';
                button.classList.add('copied');

                setTimeout(() => {
                    button.textContent = 'Copiar';
                    button.classList.remove('copied');
                }, 2000);
            });
        });

        // Efecto de resaltado para bloques de código
        document.querySelectorAll('.code-block pre').forEach(pre => {
            pre.addEventListener('mouseover', () => {
                pre.style.transition = 'background-color 0.3s ease';
                pre.style.backgroundColor = 'rgba(0, 255, 0, 0.1)';
            });
            pre.addEventListener('mouseout', () => {
                pre.style.backgroundColor = '';
            });
        });

        // Efecto Matrix (copiar del index.html)
    </script>
</body>
</html>
